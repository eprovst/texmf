%%%%%%%%%
% Theme %
%%%%%%%%%

% Add space between paragraphs
\RequirePackage{etoolbox}

\setlength{\parskip}{2ex minus 2ex}
\newcommand{\@minipagerestore}{\setlength{\parskip}{2ex minus 2ex}}

% Itemize
\RequirePackage{enumitem}

\setlist{topsep={-\parskip + (1ex minus 1ex)},
         itemsep={0.5ex minus 0.5ex}}

\newcommand{\nicebullet}{\raise1.25pt\hbox{\donotcoloroutermaths$\bullet$}}
\setlist[itemize]{label=\nicebullet}

% Caption
\RequirePackage{caption}
\captionsetup{labelformat=empty}
\setlength{\abovecaptionskip}{1.5ex}
\setlength{\belowcaptionskip}{0pt}
\setbeamerfont{caption}{size=\footnotesize}

% Title page
\RequirePackage{calc}

\setbeamerfont{title page title}{size=\huge,series=\bfseries}
\setbeamerfont{title page author}{size=\normalsize}
\setbeamerfont{title page institute}{size=\footnotesize}

\setbeamertemplate{title page} {%
  \begin{minipage}[b][\beamer@paperheight]{\textwidth}%
    \setlength{\parskip}{0pt}%
    \raggedright{}%
    {\usebeamerfont{title page title}\usebeamercolor[fg]{title page}\inserttitle\par}%
    \vspace{-.2ex}
    \rule{\widthof{\insertauthor} * \real{1.6}}{1pt}\par
    {\usebeamerfont{title page author}\usebeamercolor[fg]{title page}\insertauthor\par}%
    {\usebeamerfont{title page institute}\usebeamercolor[fg]{title page}\insertinstitute\par}%
    \vspace{\beamer@leftmargin}%
  \end{minipage}%
}

% Section page
\AtBeginSection{%
  \begin{frame}
    \begin{minipage}[b][\beamer@paperheight]{\textwidth}%
      \setlength{\parskip}{0pt}%
      \raggedright{}%
      {\Large \bfseries \insertsection\par}%
      \vspace{-.2ex}%
      \rule{\widthof{\Large \bfseries \insertsection} / \real{1.6}}{1pt}\par
      \vspace{3\beamer@leftmargin}%
    \end{minipage}%
  \end{frame}%
}
